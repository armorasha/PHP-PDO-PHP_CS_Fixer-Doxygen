<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PDO + Linting + Code Documentation: PHP: PDO Data Abstraction Layer + Code Linting + Code Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="favicon.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PDO + Linting + Code Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">PHP: PDO Data Abstraction Layer + Code Linting + Code Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md1"></a>
R_CAUTION</h2>
<blockquote class="doxtable">
<p>DO NOT MAKE THIS REPO PUBLIC. CONTAINS MYSQL SYSTEM ROOT PASSWORD and references to my own docx summaries which is useless to others. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md2"></a>
R_MySQL 8.x's 'caching_sha2_password' authentication</h2>
<p>PHP 7.4 does not support MySQL 8.x's <code>caching_sha2_password</code> user authentication method/plugin yet, db user authentication is required for PDO similar to mysqli. You need to change the access user's (that will be used in this PDO exercises) auth method/plugin to <code>mysql_native_password</code> in MySQL. I used <code>root</code> user and changed its auth method.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
R_How to use this exercise</h2>
<p>Start with running <code><a class="el" href="index_8php.html">index.php</a></code> with XAMPP's Apache, which contains links to all the exercises. Use create_database.sql to create a database in MySQL Workbench for this exercise to connect to. Don't use phpMyAdmin.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
PDO</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
1. PDO</h2>
<p>Using PDO (PHP Data Object, a Data Abstraction layer) in PHP to connect to different databases like MySQL, SQLite and MSSQL with no code change in the actual PHP project itself. The code change will happen only in PDO layer. Without PDO, change in database (MySQL-&gt;MSSQL) will result in change of all SQL queries in the PHP project.</p>
<h4><a class="anchor" id="autotoc_md6"></a>
Keywords and Notes</h4>
<ul>
<li>PDO - PHP Data Object, a Data Abstraction layer. <code>$pdo = new PDO($dsn, $user, $password);</code></li>
<li>DSN - Data Source Name. DSN is the connection method to a database. <code>$dsn = 'mysql:host=localhost;dbname=php_pdo';</code></li>
<li>DAL - Data Abstraction Layer. There are many DALs: PHP's PDO and also other third party DALs.</li>
<li>Prepared statement / Parameterized queries are used in PDO DAL.</li>
<li>fetch<ul>
<li>fetch in many ways including associative array object (main) but there are others.</li>
<li>you can also override and fetch array, instead of object.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
2. Parameterized SQL queries</h2>
<p>Must use Parameterized SQL queries for PDO. See third paragraph to find out why. A parameterized query (aka prepared statement) is a means of pre-compiling a SQL statement so that all you need to supply are the "parameters" (like "variables") that need to be inserted into the statement for it to be executed. It's commonly used as a means of preventing SQL injection attacks. Prepared statements are so useful that they are the only feature that PDO will emulate for drivers that don't support them. This ensures that an application will be able to use the same data access paradigm regardless of the capabilities of the database.</p>
<h4><a class="anchor" id="autotoc_md8"></a>
Keywords and Notes</h4>
<ul>
<li>Prepared Statements can have<ul>
<li>positional params (0,1,2,..)</li>
<li>named params (id, name, age,..)</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
3. Transactions</h2>
<p>A transaction is an atomic (wholesome) unit of database operations against the data in one or more databases. The results of all the SQL statements in a transaction can be either <b>all committed</b> to the database or <b>all rolled back</b>. For example, an order processing can have SQL statements for creating new customer and inserting new order for that customer. If inserting new order fails for any reason, then there will be a new customer in DB without any order, without using transactions. With using transactions, when inserting new order fails, the new customer account created will also be rolled back. Transactions will rollback even when sending queries to different DBs.</p>
<h4><a class="anchor" id="autotoc_md10"></a>
Keywords and Notes</h4>
<ol type="1">
<li>begin transaction</li>
<li>execute several queries in several databases</li>
<li>commit, if all queries successful.</li>
<li>rollback all queries, if any query failed.</li>
</ol>
<h2><a class="anchor" id="autotoc_md11"></a>
4. Get Metadata and Attributes</h2>
<p>Using PDO, You can also retrieve</p><ul>
<li>metadata of a query, like column count of result set. (Eg: '2' for country_name and population columns)</li>
<li>database connection attributes (Eg: Driver: mysql, Server version: 5.7.22-0ubuntu0.16.04.1, Autocommit mode: 1)</li>
<li>columns metadata of a result (Eg: Table name: countries, Column name: id, Column length: 20, Column flags: not_null primary_key)</li>
</ul>
<h1><a class="anchor" id="autotoc_md12"></a>
Linting &amp; Block Commenting like JavaDoc for Code Documentation</h1>
<h4><a class="anchor" id="autotoc_md13"></a>
VSCode Extensions:</h4>
<ul>
<li><b>PHP-CS-Fixer</b> for linting PHP code</li>
<li><b>PHP DocBlocker</b> for Block Commenting PHP similar to JavaDoc for Java in NetBeans</li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
Automatic Linting-on-save using PHP-CS-Fixer</h2>
<p>Use <a href="https://medium.com/@armorasha/php-cs-fixer-how-to-install-vs-code-2020-windows-10-75b6d5ed03ce">my Medium blog post</a> for how to install and use PHP-CS-Fixer in VS Code. This linter <em><b>lints code automatically</b></em> everytime on-save, so you need not lint the code manually.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Block Commenting like JavaDoc for Code Documentation</h2>
<p>Use PHP DocBlocker extension for auto-fill commenting as in <a class="el" href="1___block___commenting_8php.html">1_Block_Commenting.php</a> file in this repo. <em><b>You cannot generate a HTML Code Documentation file from the block comments within VS Code</b></em>. You need to use third party software like Doxygen to generate HTML document, I used this <a href="https://www.doxygen.nl/download.html">GUI based Windows Doxygen tool</a> to generate HTML documentation for my code. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
